#! /usr/bin/env bash


name=$1
ename="${name/ /-}"
ename="${ename/,/-}"
ename="${ename/;/-}"
ename="${ename/!/-}"
ename="${ename/./-}"




d=$(date +%Y-%m-%d)
filename=_posts/$d-$ename.md

if [ -f $filename ];then
  echo "file $filename exists"
	exit 1
fi

if [ "$(git rev-parse --verify $ename)" != "" ]; then
  echo "branch $ename already exists"
	exit 1
fi

git stash
git checkout gh-pages
git checkout -b $ename


iname="${name/-/ }"
iname="${iname/_/ }"

echo "---" >  $filename
echo "title: $iname" >> $filename
echo "layout: page" >> $filename
echo "---" >> $filename
